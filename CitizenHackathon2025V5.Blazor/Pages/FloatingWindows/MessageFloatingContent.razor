@using CitizenHackathon2025.Blazor.DTOs
@using CitizenHackathon2025.Contracts.Hubs
@inject CitizenHackathon2025V5.Blazor.Client.Services.MessageService MessageService
@inject NavigationManager Navigation
@inject IJSRuntime JS
@inject IConfiguration Config
@inject CitizenHackathon2025V5.Blazor.Client.Services.Interfaces.IAuthService Auth

<div class="oz-card">
    <div class="oz-row" style="align-items:center;">
        <input class="input-compact"
               placeholder="Your message..."
               @bind="_newContent"
               @bind:event="oninput" />
        <button class="chip add-chip" @onclick="SendAsync" disabled="@string.IsNullOrWhiteSpace(_newContent)">Send</button>
    </div>

    <div class="table-wrapper table-wrapper--fill"
         @ref="ScrollContainerRef"
         style="overflow-y: auto; border: 1px solid rgba(255,255,255,.12); border-radius: 12px;">
        <table class="table table-striped table-dark styled-table data-list">
            <thead>
                <tr>
                    <th>#</th>
                    <th>When</th>
                    <th>Source</th>
                    <th>Content</th>
                </tr>
            </thead>
            <tbody>
                @if (!_messages.Any())
                {
                    <tr>
                        <td colspan="99"><div class="empty-state">No messages yet.</div></td>
                    </tr>
                }
                else
                {
                    @foreach (var m in _messages)
                    {
                        <tr class="msg-head">
                            <td class="c-id">@m.Id</td>
                            <td class="c-when">@m.CreatedAt.ToLocalTime().ToString("g")</td>
                            <td class="c-src">@((m.SourceType ?? "N/A")) @m.RelatedName</td>
                            <td class="c-spacer"></td>
                        </tr>

                        <tr class="msg-body">
                            <td colspan="4">
                                <div class="msg-content">@m.Content</div>
                            </td>
                        </tr>
                    }

                }
            </tbody>
        </table>
    </div>
</div>





























































































































@*  /*// Copyrigtht (c) 2025 Citizen Hackathon https://github.com/POLLESSI/Citizenhackathon2025V5.Blazor.Client. All rights reserved.*/ *@