@* CrowdInfoCalendarDetail.razor *@
@page "/crowdcalendar/{id:int}"
@using CitizenHackathon2025V5.Blazor.Client.Models
@inject CitizenHackathon2025V5.Blazor.Client.Services.CrowdInfoCalendarService Svc
@inject NavigationManager Nav

<h3>Calendar Entry @Id</h3>

@if (model is null)
{
    <p>Loading…</p>
}
else
{
    <EditForm Model="model" OnValidSubmit="Save">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="row g-3">
            <div class="col-md-3">
                <label class="form-label">Date (UTC)</label>
                <InputDate @bind-Value="model.DateUtc" class="form-control" /> @* ✅ *@
            </div>

            <div class="col-md-3">
                <label class="form-label">Region</label>
                <input class="form-control" @bind="model.RegionCode" />
            </div>

            <div class="col-md-3">
                <label class="form-label">PlaceId</label>
                <input class="form-control" type="number" @bind="model.PlaceId" />
            </div>

            <div class="col-md-3">
                <label class="form-label">Expected Level (1..4)</label>
                <input class="form-control" type="number" min="1" max="4" @bind="model.ExpectedLevel" />
            </div>

            <div class="col-md-6">
                <label class="form-label">Event Name</label>
                <input class="form-control" @bind="model.EventName" />
            </div>

            <div class="col-md-3">
                <label class="form-label">Confidence (0..100)</label>
                <input class="form-control" type="number" min="0" max="100" @bind="model.Confidence" />
            </div>

            <div class="col-md-3">
                <label class="form-label">Lead Hours</label>
                <input class="form-control" type="number" min="0" max="48" @bind="model.LeadHours" />
            </div>

            <div class="col-md-3">
                <label class="form-label">Start (HH:mm)</label>
                <input class="form-control" placeholder="HH:mm" @bind="startStr" />
            </div>

            <div class="col-md-3">
                <label class="form-label">End (HH:mm)</label>
                <input class="form-control" placeholder="HH:mm" @bind="endStr" />
            </div>

            <div class="col-md-12">
                <label class="form-label">Message Template</label>
                <textarea class="form-control" rows="2" @bind="model.MessageTemplate"></textarea>
            </div>

            <div class="col-md-6">
                <label class="form-label">Tags</label>
                <input class="form-control" @bind="model.Tags" />
            </div>

            <div class="col-md-2 d-flex align-items-center">
                <div class="form-check mt-4">
                    <input class="form-check-input" type="checkbox" id="activeChk" @bind="model.Active" />
                    <label class="form-check-label" for="activeChk">Active</label>
                </div>
            </div>
        </div>

        <div class="mt-3 d-flex gap-2">
            <button class="btn btn-primary" type="submit">Save</button>
            <button class="btn btn-secondary" type="button" @onclick="Back">Back</button>
            <button class="btn btn-warning" type="button" @onclick="SoftDelete">Soft Delete</button>
            <button class="btn btn-info" type="button" @onclick="Restore">Restore</button>
            <button class="btn btn-danger" type="button" @onclick="HardDelete">Hard Delete</button>
        </div>
    </EditForm>
}